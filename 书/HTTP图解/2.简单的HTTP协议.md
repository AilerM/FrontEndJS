# 2.简单的HTTP协议

## 通过请求响应交换达成通信

- **请求报文**
方法、URI、协议版本、可选请求首部、内容实体
```
GET /index.html HTTP/1.1    // 方法、URI、协议版本
Host: **        // 可选请求首部
content-length: 7932
content-type: application/x-javascript; charset=utf-8

// 内容实体
name=test&age=12
```

- **响应报文**
协议版本、状态嘛原因、状态码、响应首部、主体
```
HTTP/1.1 200 ok

accept-encoding: gzip, deflate, br
accept-language: zh-CN,zh;q=0.9
cache-control: no-cache
```

## HTTP不保存状态
- 无状态：无状态协议 
- 不保留：协议本身不保留之前一切请求、响应报文信息。为了更快处理大量事物、确保协议可伸缩性、特意设计，引入Cookie技术

## 请求URI定位资源

如果不是访问特定资源，而是访问服务器本身，可以用*代替
OPTIONS * HTTP/1.1

## 告知服务器意图的HTTP方法
- GET 获取
- POST 传输
- PUT 更新
- DELETE 删除
- HEAD 获取报文首部
HTTP/1.1新增
- CONNECT 要求用隧道协议链接代理
- TRACE  追踪路径 容易引发XST 跨站追踪 不常用
- OPTIONS 询问支持的方法


## 持久链接
- HTTP采用的是”请求-应答“模式，当使用普通模式，既非Keep-Alive模式时，每个请求/应答服务器客户端都需要新建一个链接，完成之后立即断开
- 当使用Keep-Alive模式（持久连接，连接重用）Keep-Alive的功能是客户端服务器连接持久有效（HTTP1.1版本支持）
- 好处：减少了TCP链接重复链接和断开造成额外开销

### 管线化
-`持久连接`情况下，某个连接上的消息传递类似
  请求1->响应1->请求2->响应2->请求3->响应3
- 某个连接的消息变成了类似
  请求1->请求2->请求3->响应1->响应2->响应3 

- 管线化机制通过`持久连接`完成,仅HTTP1.1版本支持
- `只有GET HEAD可以进行管线化，POST有限制`
- `初次建立连接时不应启动管线化，因为对方HTTP版本不支持`
- 管线化不会影响响应到来的顺序
- HTTP1.1要求服务器支持管线化，但并不要求对响应进行管线化处理，还是要求对管线化请求不失败即可
- 开启管线化，可能并不会带来大幅性能提升，而且很多服务器和代理对管线化支持不太好，因此Chrome Firefox默认并未开启管线化支持

