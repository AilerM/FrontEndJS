# CSRF

>CSRF，即 Cross Site Request Forgery，中译是**跨站请求伪造**，是一种劫持受信任用户向服务器发送非预期请求的攻击方式。
- 其他网站对本网站的影响，其他网站对本网站发生了用户不知情的请求

>通常情况下，CSRF 攻击是攻击者借助受害者的 Cookie 骗取服务器的信任，可以在受害者毫不知情的情况下以受害者名义伪造请求发送给受攻击服务器，从而在并未授权的情况下执行在权限保护之下的操作

1：csrf 跨站伪造提交 post 请求
2：用户打开任意第三方网站，在新闻网站发布一条评论  网络蠕虫

场景：公共类。
  服务器传递一个加密后的 token，给前台页面；
  前端做提交的时候，连同这个 token 做为隐藏的字段，form 表单之后，一起提交服务器。
  服务器接收请求，先检测 token 是否合法，合法就进入。
  隐藏的校验问题。


## CSRF攻击危害
  - 利用用户登陆状态
  - 盗取用户资金
  - 用户不知情
  - 冒充用户发帖背锅
  - 完成业务请求

## CSRF防御
  - 1：在前端页面添加验证码 ccap 图形验证码
  - 2：token
  - 4：same-site // 任何请求不能带 cookie
  - 3：验证 referer 根据 HTTP 协议，在 HTTP 头中有一个字段叫 Referer，它记录了该 HTTP 请求的来源地址。通过 Referer Check，可以检查请求是否来自合法的"源"。
  - 4：禁止来自第三方网站请求
